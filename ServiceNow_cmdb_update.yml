- name: Update CMDB table
  hosts: all
  gather_facts: false
  connection: local

  collections:
    - servicenow.itsm
  
  tasks: 
  
  - name: Update SNOW CMDB
    servicenow.itsm.configuration_item:
      state: "{{ status }}"
      name: "{{ inventory_hostname }}"
      ip_address: "{{ ip_addr }}"
      environment: production
      other:
        classification: Production
        class: cmdb_ci_server
        fqdn: "{{ fqdn }}"
        os: "{{ os }}"
        host_name: "{{ inventory_hostname }}"
    delegate_to: localhost